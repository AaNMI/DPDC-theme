{"version":3,"file":"email-campaign.js","sources":["email-campaign.js"],"sourcesContent":["$(function () {\r\n\tvar\r\n\t\tto = encodeURIComponent($('#campaign-email-to').text()) || '',\r\n\t\tbcc = encodeURIComponent($('#campaign-email-bcc').text()) || '',\r\n\t\tsubject = encodeURIComponent($('#campaign-email-subject').text()) || '',\r\n\t\tbody = encodeURIComponent($('#campaign-email-body').text()) || '',\r\n\t\tnext = $('#campaign-next').text() || '/',\r\n\t\thead = \"mailto:\" + to + \"?subject=\" + subject +\r\n\t\t\t\"&bcc=\" + bcc,\r\n\t\tfull = head + '&body=' + body,\r\n\t\tgmail = \"https://mail.google.com/mail/u/0/?view=cm&source=mailto\" +\r\n\t\t\t\"&to=\" + to + \"&bcc=\" + bcc + \"&su=\" + subject,\r\n\t\tyahoo = \"http://compose.mail.yahoo.com/\" +\r\n\t\t\t\"?To=\" + to + \"&Subject=\" + subject + \"&Bcc=\" + bcc,\r\n\t\tcanOpenFull = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera\\sMini/i\r\n\t\t\t.test(navigator.userAgent) &&\r\n\t\t\t!/IEMobile/i.test(navigator.userAgent),\r\n\t\tstarted = false,\r\n\t\tcopied = false,\r\n\t\tcontainer = $('.campaign-email-panel');\r\n\r\n\tfunction render() {\r\n\t\tcontainer.empty();\r\n\t\tif (!started) {\r\n\t\t\tif (canOpenFull) {\r\n\t\t\t\tcontainer.append([\r\n\t\t\t\t\t$('<button>').html('Send email').click(open(full)),\r\n\t\t\t\t]);\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.append([\r\n\t\t\t\t\t$('<button>').html('Start').click(copy),\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!copied) {\r\n\t\t\t\tcontainer.append(\r\n\t\t\t\t\t$('<p>').html('Copy the email below, open your mail app, ' +\r\n\t\t\t\t\t\t'paste and send!'),\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcontainer.append(\r\n\t\t\t\t\t$('<p>').html('<b>Copied the email!</b> Now open ' +\r\n\t\t\t\t\t\t'your mail app, paste and send!')\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcontainer.append([\r\n\t\t\t\t$('<button>').html('Gmail').click(open(gmail)),\r\n\t\t\t\t' ',\r\n\t\t\t\t$('<button>').html('Yahoo').click(open(yahoo)),\r\n\t\t\t\t' ',\r\n\t\t\t\t$('<button>').html('System Email App').click(open(head))\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\tcontainer.append([\r\n\t\t\t' ',\r\n\t\t\t$('<a>').html('View email').attr('href', '#')\r\n\t\t\t\t.click(manual)\r\n\t\t]);\r\n\r\n\t\tif (started && !copied) manual();\r\n\t}\r\n\r\n\t$('.campaign-email-manual').hide();\r\n\r\n\tfunction open(url) {\r\n\t\treturn function(event) {\r\n\t\t\twindow.open(url);\r\n\t\t\tlocation.href = next;\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction copy() {\r\n\t\tstarted = true;\r\n\t\tselect($('#campaign-email-body')[0]);\r\n\t\tcopied = document.execCommand('copy');\r\n\t\trender();\r\n\t}\r\n\r\n\tfunction manual() {\r\n\t\t$('.campaign-email-manual').show();\r\n\t}\r\n\r\n\tfunction select(text) {\r\n\t\tvar range, selection;\r\n\t\tif (document.body.createTextRange) {\r\n\t\t\trange = document.body.createTextRange();\r\n\t\t\trange.moveToElementText(text);\r\n\t\t\trange.select();\r\n\t\t} else if (window.getSelection) {\r\n\t\t\trange = document.createRange();\r\n\t\t\trange.selectNodeContents(text);\r\n\t\t\tselection = window.getSelection();\r\n\t\t\tselection.removeAllRanges();\r\n\t\t\tselection.addRange(range);\r\n\t\t}\r\n\t}\r\n\r\n\t$('.campaign-email-field').click(function (e) {\r\n\t\tselect(e.target);\r\n\t});\r\n\r\n\trender();\r\n});\r\n"],"names":["$","to","encodeURIComponent","text","bcc","subject","body","next","head","full","gmail","yahoo","canOpenFull","test","navigator","userAgent","started","copied","container","render","empty","append","html","click","open","copy","attr","manual","url","event","window","location","href","preventDefault","select","document","execCommand","show","range","createTextRange","moveToElementText","getSelection","createRange","selectNodeContents","selection","removeAllRanges","addRange","hide","e","target"],"mappings":"AAAAA,EAAE,WACD,IACCC,EAAKC,mBAAmBF,EAAE,sBAAsBG,SAAW,GAC3DC,EAAMF,mBAAmBF,EAAE,uBAAuBG,SAAW,GAC7DE,EAAUH,mBAAmBF,EAAE,2BAA2BG,SAAW,GACrEG,EAAOJ,mBAAmBF,EAAE,wBAAwBG,SAAW,GAC/DI,EAAOP,EAAE,kBAAkBG,QAAU,IACrCK,EAAO,UAAYP,EAAK,YAAcI,EACrC,QAAUD,EACXK,EAAOD,EAAO,SAAWF,EACzBI,EAAQ,8DACET,EAAK,QAAUG,EAAM,OAASC,EACxCM,EAAQ,qCACEV,EAAK,YAAcI,EAAU,QAAUD,EACjDQ,EAAc,yDACZC,KAAKC,UAAUC,aACf,YAAYF,KAAKC,UAAUC,WAC7BC,GAAU,EACVC,GAAS,EACTC,EAAYlB,EAAE,yBAEf,SAASmB,IACRD,EAAUE,QACLJ,GAWCC,EAMJC,EAAUG,OACTrB,EAAE,OAAOsB,KAAK,qEANfJ,EAAUG,OACTrB,EAAE,OAAOsB,KAAK,8DAShBJ,EAAUG,OAAO,CAChBrB,EAAE,YAAYsB,KAAK,SAASC,MAAMC,EAAKd,IACvC,IACAV,EAAE,YAAYsB,KAAK,SAASC,MAAMC,EAAKb,IACvC,IACAX,EAAE,YAAYsB,KAAK,oBAAoBC,MAAMC,EAAKhB,OA1B/CI,EACHM,EAAUG,OAAO,CAChBrB,EAAE,YAAYsB,KAAK,cAAcC,MAAMC,EAAKf,MAG7CS,EAAUG,OAAO,CAChBrB,EAAE,YAAYsB,KAAK,SAASC,MAAME,KAwBrCP,EAAUG,OAAO,CAChB,IACArB,EAAE,OAAOsB,KAAK,cAAcI,KAAK,OAAQ,KACvCH,MAAMI,KAGLX,IAAYC,GAAQU,IAKzB,SAASH,EAAKI,GACb,OAAO,SAASC,GACfC,OAAON,KAAKI,GACZG,SAASC,KAAOzB,EAChBsB,EAAMI,kBAIR,SAASR,IACRT,GAAU,EACVkB,EAAOlC,EAAE,wBAAwB,IACjCiB,EAASkB,SAASC,YAAY,QAC9BjB,IAGD,SAASQ,IACR3B,EAAE,0BAA0BqC,OAG7B,SAASH,EAAO/B,GACf,IAAImC,EACAH,SAAS7B,KAAKiC,kBACjBD,EAAQH,SAAS7B,KAAKiC,mBAChBC,kBAAkBrC,GACxBmC,EAAMJ,UACIJ,OAAOW,gBACjBH,EAAQH,SAASO,eACXC,mBAAmBxC,IACzByC,EAAYd,OAAOW,gBACTI,kBACVD,EAAUE,SAASR,IAhCrBtC,EAAE,0BAA0B+C,OAoC5B/C,EAAE,yBAAyBuB,MAAM,SAAUyB,GAC1Cd,EAAOc,EAAEC,UAGV9B","sourceRoot":"/source/"}